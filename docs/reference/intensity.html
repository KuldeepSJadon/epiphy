<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Construct count, incidence and severity objects. — intensity • epiphy</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Construct count, incidence and severity objects. — intensity" />

<meta property="og:description" content="count(), incidence() and severity() create eponym
objects. All of these classes inherit from the base class intensity.
The choice of the class depends on the nature of the data set." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">epiphy</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/epiphy.html">Primer</a>
</li>
<li>
  <a href="../reference/index.html">Functions and data</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/defs-and-eqns.html">Definitions and relationships between parameters</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/chgigot/epiphy">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Construct count, incidence and severity objects.</h1>
    <small class="dont-index">Source: <a href='https://github.com/chgigot/epiphy/blob/master/R/intensity-classes.R'><code>R/intensity-classes.R</code></a></small>
    <div class="hidden name"><code>intensity.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>count()</code>, <code>incidence()</code> and <code>severity()</code> create eponym
objects. All of these classes inherit from the base class <code>intensity</code>.
The choice of the class depends on the nature of the data set.</p>
    
    </div>

    <pre class="usage"><span class='fu'>count</span>(<span class='no'>data</span>, <span class='no'>mapping</span>, <span class='kw'>keep_only_std</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>incidence</span>(<span class='no'>data</span>, <span class='no'>mapping</span>, <span class='kw'>keep_only_std</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>severity</span>(<span class='no'>data</span>, <span class='no'>mapping</span>, <span class='kw'>keep_only_std</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data frame. Each line corresponds to a record (or case, or
entry).</p></td>
    </tr>
    <tr>
      <th>mapping</th>
      <td><p>A <code>mapping</code> object, created with <code><a href='mapping.html'>mapping()</a></code> or
  <code><a href='mapping.html'>mapping_()</a></code> functions. ... A vector with all the corresponding variables. The different
elements can be named (names of the elements) of the data frame in the
incidence object), or unamed. In the latter case, elements must be
correctly ordered, i.e. x, y, z, t, r and then n. If variables in NULL,
then only the 6 first ... will be take into account in the following (1, 2,
...), i.e. the id of the value. All the 'parameters' need to be specified.</p></td>
    </tr>
    <tr>
      <th>keep_only_std</th>
      <td><p>Are only standard names kept when proceeding to mapping?
Setting <code>keep_only_std</code> to TRUE may be useful for subsequent data splitting
using extra labels.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An <code>incidence</code> object.</p>
<p>When printed, difference information are available:</p>
<ul>
<li><p>The number of sampling units.</p></li>
<li><p>The time.</p></li>
<li><p>Is it georeferenced (TRUE/FALSE)</p></li>
<li><p>Are there any NA data (TRUE/FALSE)</p></li>
<li><p>Is it a complet array (TRUE/FALSE)? A complete array means that all the recorded values allow to
    display an array (even if some data are not available), but this was explicitelly specified. To
    complete a dataset, just use <code>complete(data)</code>. You can also remove NA, which is necessary to use
    some analysis technics, using <code>replaceNA(data)</code> or <code>replace.na(data)</code>. Note that using both
    commands will results in modifying the original data sets which will be specified.</p></li>
</ul>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>incidence</code> reads disease incidence data from a data frame and return an
incidence object. All of these classes inherit from <code>intensity</code> class.</p><ul>
<li><p>count: Each sampling unit contains from 0 to theoreticaly an infinity of data.
    Number are positive integers.</p></li>
<li><p>incidence: Each sampling unit contains an number of diseased plants,
    ranging from 0 to <code>n</code> which is the total amount of plants per sampling
    unit.</p></li>
<li><p>severity: Each sampling unit contain a percentage of disease, a positive
    real number ranging from 0.0 to 1.0.</p></li>
</ul>
    <p>Class intensity and inherited classes</p>
<p>All the classes recording disease intensity measurements inherit from this
class. The class <code>intensity</code> is virtual which means that no object of a
class <code>intensity</code> can be constructed. This class only describes common
features of all the different disease intensity measurements implemented in
this package (<code>count</code>, <code>incidence</code> and
<code>severity</code>). You should call one of these inherited classes
instead, depending on the nature of your data.</p>
<p>By convention, the first columns of the different data frames of each slots
have names, but the spatial, temporal or even disease information do not need
to fit to these conventions or may be less straightforward and need more
columns to record correctly all the information. In such unusual situations,
the automatic options of the analysis tools would need to be overridden to be
able to work in the desired way.</p>
<p>The differences between the different inherited classes regard only the
<code>obs</code> slot. In the case of <code>count</code>, the data expected for
each record are positive integers (N+). For <code>incidence</code>, the data
sets are supposed to be two information set per records, the number of
diseased unit per sampling unit (r) and the total number of units per
sampling unit (n). Note that in its current implementation, n is supposed to
be the same for a whole data set. Unequal sampling units are not implemented
yet. Finally, for <code>severity</code>, r is positive real ranging from 0
to 1 and depecting a percentage.</p>
<p>space A data frame containing only spatial information. Each row
  corresponds to a sampling unit. By convention, the first 3 columns are
  names <code>x</code>, <code>y</code>, <code>z</code>.</p>
<p>time A data frame containing temporal information. By convention, the
  first column is named <code>t</code>.</p>
<p>obs A data frame containing disease observations themselves. The name
  of the columns may differ between the sub-class chosed to record the data.</p>
<p>Note that it is possible to create a "severity" object but no statistical
tools are currently implemented to deal with such an object.</p>
<p>An <code>intensity</code> object contains at very least the "pure" intensity
records (column <code>r</code>) which is a so-called observational variable.
Another observational variable, the number of individuals in a sampling unit
(<code>n</code>), is present in the case of a <code>incidence</code> object. Very often
in addition to observational variables, there are spatial (columns <code>x</code>,
<code>y</code> and/or <code>z</code>) and/or temporal (column <code>t</code>) variables.</p>
<p>Note that the <code>severity</code> class and the <code>z</code> variable (the 3rd
spatial dimension) are implemented but no statistical methods use them at
this point.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Create intensity objects</span>
<span class='co'># Implicite call: The variable mapping does not need to be specified if the</span>
<span class='co'># column names of the input data frame follow the default names.</span>
<span class='fu'>colnames</span>(<span class='no'>tomato_tswv</span>$<span class='no'>field_1929</span>) <span class='co'># Returns c("x", "y", "t", "i", "n")</span></div><div class='output co'>#&gt; [1] "x" "y" "t" "i" "n"</div><div class='input'><span class='no'>my_incidence_1</span> <span class='kw'>&lt;-</span> <span class='fu'>incidence</span>(<span class='no'>tomato_tswv</span>$<span class='no'>field_1929</span>)
<span class='no'>my_incidence_1</span></div><div class='output co'>#&gt; # A mapped object: incidence class
#&gt; # dim: 2 space, 1 time, 2 obs
#&gt;   [x] [y] [t] [i] [n]
#&gt;     x   y   t   i   n
#&gt; 1   1   1   1   0   1
#&gt; 2   1   2   1   1   1
#&gt; 3   1   3   1   0   1
#&gt; 4   1   4   1   1   1
#&gt; 5   1   5   1   0   1
#&gt; 6   1   6   1   0   1
#&gt; # ... with 4314 more records (rows)</div><div class='input'><span class='no'>my_incidence_2</span> <span class='kw'>&lt;-</span> <span class='fu'>incidence</span>(<span class='no'>tomato_tswv</span>$<span class='no'>field_1929</span>,
                            <span class='fu'><a href='mapping.html'>mapping</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>y</span>, <span class='kw'>t</span> <span class='kw'>=</span> <span class='no'>t</span>, <span class='kw'>i</span> <span class='kw'>=</span> <span class='no'>i</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='no'>n</span>))
<span class='fu'>identical</span>(<span class='no'>my_incidence_1</span>, <span class='no'>my_incidence_2</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># Explicite call: Otherwise, the variable mapping need to be specified, at</span>
<span class='co'># least for column names that do not correspond to default names.</span>
<span class='fu'>colnames</span>(<span class='no'>aphids</span>) <span class='co'># Returns c("xm", "ym", "i")</span></div><div class='output co'>#&gt; [1] "x"  "y"  "xm" "ym" "i" </div><div class='input'><span class='no'>my_count_1</span> <span class='kw'>&lt;-</span> <span class='fu'>count</span>(<span class='no'>aphids</span>, <span class='fu'><a href='mapping.html'>mapping</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>xm</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>ym</span>, <span class='kw'>i</span> <span class='kw'>=</span> <span class='no'>i</span>))
<span class='no'>my_count_1</span></div><div class='output co'>#&gt; # A mapped object: count class
#&gt; # dim: 2 space, 0 time, 1 obs
#&gt;   . . [x] [y] [i]
#&gt;   x y  xm  ym   i
#&gt; 1 1 1   0   0   0
#&gt; 2 2 1  30   0   0
#&gt; 3 3 1  60   0   3
#&gt; 4 4 1  90   0   7
#&gt; 5 5 1 120   0   9
#&gt; 6 6 1 150   0   1
#&gt; # ... with 57 more records (rows)</div><div class='input'><span class='co'># We can drop the "i = i" in the mapping.</span>
<span class='no'>my_count_2</span> <span class='kw'>&lt;-</span> <span class='fu'>count</span>(<span class='no'>aphids</span>, <span class='fu'><a href='mapping.html'>mapping</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>xm</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>ym</span>))
<span class='fu'>identical</span>(<span class='no'>my_count_1</span>, <span class='no'>my_count_2</span>)</div><div class='output co'>#&gt; [1] FALSE</div><div class='input'>
<span class='co'># It is possible to change the variable mapping after the creation of an</span>
<span class='co'># intensity object:</span>
<span class='no'>another_incidence</span> <span class='kw'>&lt;-</span> <span class='fu'>incidence</span>(<span class='no'>hop_viruses</span>$<span class='no'>HpLV</span>)
<span class='no'>another_incidence</span></div><div class='output co'>#&gt; # A mapped object: incidence class
#&gt; # dim: 2 space, 1 time, 2 obs
#&gt;   [x] [y]  .   .  [t] [i] [n]
#&gt;     x   y xm  ym    t   i   n
#&gt; 1   1   1  0   0 1996   1   1
#&gt; 2   1   2  0 1.8 1996   0   1
#&gt; 3   1   3  0 3.6 1996   0   1
#&gt; 4   1   4  0 5.4 1996   0   1
#&gt; 5   1   5  0 7.2 1996   0   1
#&gt; 6   1   6  0   9 1996   0   1
#&gt; # ... with 2544 more records (rows)</div><div class='input'><span class='fu'><a href='mapping.html'>remap</a></span>(<span class='no'>another_incidence</span>, <span class='fu'><a href='mapping.html'>mapping</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>xm</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>ym</span>))</div><div class='output co'>#&gt; # A mapped object: incidence class
#&gt; # dim: 2 space, 1 time, 2 obs
#&gt;   . . [x] [y]  [t] [i] [n]
#&gt;   x y  xm  ym    t   i   n
#&gt; 1 1 1   0   0 1996   1   1
#&gt; 2 1 2   0 1.8 1996   0   1
#&gt; 3 1 3   0 3.6 1996   0   1
#&gt; 4 1 4   0 5.4 1996   0   1
#&gt; 5 1 5   0 7.2 1996   0   1
#&gt; 6 1 6   0   9 1996   0   1
#&gt; # ... with 2544 more records (rows)</div><div class='input'>
<span class='co'>## Plotting data</span>
<span class='fu'>plot</span>(<span class='no'>my_incidence_1</span>) <span class='co'># Same as: plot(my_incidence_1, type = "spatial")</span></div><div class='img'><img src='intensity-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'>plot</span>(<span class='no'>my_incidence_1</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"temporal"</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Computation failed in `stat_summary()`:</span>
#&gt; <span class='warning'>Hmisc package required for this function</span></div><div class='img'><img src='intensity-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='fu'>plot</span>(<span class='no'>my_count_1</span>, <span class='kw'>tile</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>5</span>)</div><div class='img'><img src='intensity-3.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'>plot</span>(<span class='no'>my_count_1</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"temporal"</span>) <span class='co'># Not possible: there is only 1 date.</span>

<span class='co'># Using grayscale:</span>
<span class='fu'>plot</span>(<span class='no'>my_count_1</span>, <span class='kw'>grayscale</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='img'><img src='intensity-4.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'>plot</span>(<span class='no'>my_count_1</span>, <span class='kw'>grayscale</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>tile</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>5</span>)</div><div class='img'><img src='intensity-5.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Christophe Gigot.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

